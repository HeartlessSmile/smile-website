import{_ as l,c as i,a,o}from"./app-DzEwyuga.js";const n="/smile-website/images/monitor/process.png",r="/smile-website/images/monitor/framework.png",s={};function t(c,e){return o(),i("div",null,e[0]||(e[0]=[a('<h1 id="整体架构" tabindex="-1"><a class="header-anchor" href="#整体架构"><span>整体架构</span></a></h1><p>技术总是为业务服务的，所以在谈论架构之前，我们应该先梳理业务需求。只有把业务需求罗列清楚，才能做好适合这个业务的架构。</p><h2 id="梳理需求" tabindex="-1"><a class="header-anchor" href="#梳理需求"><span>梳理需求</span></a></h2><h3 id="监控目标" tabindex="-1"><a class="header-anchor" href="#监控目标"><span>监控目标</span></a></h3><ol><li>错误监控 <ol><li>性能指标记录：包含LCP、FID、CLS等</li><li>异常监控：js执行异常、promise异常、vue错误、react错误等</li><li>白屏监控：白屏时间</li><li>卡顿监控：监控页面fps</li></ol></li><li>业务埋点 <ol><li>基本数据： PV、UV等</li><li>页面停留时长、页面访问历史路径</li><li>自定义携带数据，用户id等</li><li>用户行为监控：事件监听、请求监听、页面路径监听</li></ol></li></ol><h3 id="监控应用场景" tabindex="-1"><a class="header-anchor" href="#监控应用场景"><span>监控应用场景</span></a></h3><ol><li>原生JavaScript</li><li>框架层面：Vue、React</li><li>小程序</li></ol><h3 id="结果展示" tabindex="-1"><a class="header-anchor" href="#结果展示"><span>结果展示</span></a></h3><ol><li>错误监控展示 <ol><li>当前错误的堆栈及其他数据</li><li>错误发生时近几条具体的用户行为</li><li>页面性能监控数据</li></ol></li><li>业务埋点内容展示 <ol><li>日访问量、页面停留时长、页面访问历史路径等统计</li><li>针对用户行为做漏斗分析</li></ol></li><li>以上内容的可视化</li></ol><h2 id="整体流程" tabindex="-1"><a class="header-anchor" href="#整体流程"><span>整体流程</span></a></h2><p><img src="'+n+'" alt="整体流程"></p><h2 id="架构" tabindex="-1"><a class="header-anchor" href="#架构"><span>架构</span></a></h2><p><img src="'+r+'" alt="整体架构"></p><p>应用层通过SDK组装上报的数据，在接入层通过<code>削峰限流</code>减少服务器处理压力，再经过<code>数据二次处理</code>后，将原始日志存储在<code>ES</code>中，再经过<code>数据整合</code>后，将<code>聚合完毕后的数据</code>存入<code>数据库</code>中，最后提供<code>RESTful API</code> 提供给监控平台调用。</p><ul><li>削峰限流是为了避免激增的大数据量、恶意用户访问等高并发的数据导致的服务崩溃</li><li>数据二次处理是为了将<code>IP</code>、<code>归属地</code>等各种数据封装入上报数据中</li><li>数据整合包含防止脏数据添加的<code>数据清洗</code>功能和整合相同信息的数据，以便查询和追踪的<code>数据聚合</code>两部分</li></ul>',15)]))}const h=l(s,[["render",t],["__file","framework.html.vue"]]),p=JSON.parse('{"path":"/monitor/framework.html","title":"整体架构","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"梳理需求","slug":"梳理需求","link":"#梳理需求","children":[{"level":3,"title":"监控目标","slug":"监控目标","link":"#监控目标","children":[]},{"level":3,"title":"监控应用场景","slug":"监控应用场景","link":"#监控应用场景","children":[]},{"level":3,"title":"结果展示","slug":"结果展示","link":"#结果展示","children":[]}]},{"level":2,"title":"整体流程","slug":"整体流程","link":"#整体流程","children":[]},{"level":2,"title":"架构","slug":"架构","link":"#架构","children":[]}],"git":{"updatedTime":1733483676000,"contributors":[{"name":"gang.peng","username":"gang.peng","email":"gang.peng@szyh.com","commits":1,"url":"https://github.com/gang.peng"}]},"filePathRelative":"monitor/framework.md"}');export{h as comp,p as data};
